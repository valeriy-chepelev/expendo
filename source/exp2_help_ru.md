# Expendo2
v.2.0

Утилита предназначена для сбора и анализа информации о выполнении проектов в системе Yandex Tracker.

Expendo выполняется из консоли в текстовом режиме и не имеет графического интерфейса.

Для сбора данных из Yandex Tracker используется прямое подключение к БД трекера по API.

## Что можно делать в Expendo2
- Отбирать задачи для анализа, используя язык запросов Yandex Tracker.
- Выбирать группы задач по категориям, к которым относятся:
  - очереди
  - тэги
  - компоненты
  - проекты
  - корневые эпики.
- Исключать из выбранных групп задачи, относящиеся к иной группы (например, выполнить анализ для задач очереди Q1, но не имеющих тэга T1).
- Определять временной диапазон выполняемого анализа.
- Выполнять анализ на подневных или спринтовых данных, задавая при этом длительность спринта и базовую дату начала спринтов.
- Для выбранных групп задач получать расчет:
  - затраченного времени (**Spent**) нарастающим итогом
  - оценки трудозатрат (**Estimate**) - диаграмма сгорания
  - начальной оценки трудозатрат (**Original**) - аналог диаграммы сгорания без учета переоценок
  - сгоревшей начальной оценки (**Burn**) - суммарной начальной оценки закрытых задач
  - скорости изменения (дифференциала) указанных показателей.
- Получать результат в виде табличных данных на консоли.
- Экспортировать рассчитанные данные в формате CSV через системный буфер обмена.
- Отображать полученные данные в виде неограниченного количества одно- и многорядных временных диаграмм в отдельных графических виджетах.
- Полученные диаграммы можно масштабировать, считывать с них значения, сохранять в виде файлов.
- По полученным данным можно выполнить автоматическое построение кусочно-линейных трендов.
- На трендах на разных временных промежутках можно получить:
  - скорость изменения показателя, часов в единицу времени
  - относительную скорость команды
  - дату ожидаемого финиша (для **Estimate** и **Original**)
  - ускорение изменения показателя (вторая производная, при расчете скорости изменения показателей)
- Отобразить тренды в табличной форме, на графических диаграммах, экспортированы в формате CSV.

Для управление анализом Expendo2 предоставляет командную строку, через которую можно подавать команды, оперативно меняя настроки и вызывая искомые результаты.

## Запуск Expendo2

Запуск выполняется из командной строки (или через настроенный ярлык).

**При первом запуске необходимо задать ключ подключения к Yandex Tracker** - `token` и `org-id` , используя дополнительные параметры:

    expendo2 Project:MyProject --token your-token-value --org your-org-id

> Expendo2 сохраняет параметры в файле `expendo2.ini` и будет использовать их при последующих запусках.
***
При вызове в качестве основного параметра необходимо добавить запрос на языке Yandex Tracker:

    expendo2 Project:MyProject

Обычно запрос на языке Yandex Tracker может содержать пробелы, тогда параметр необходимо заключить в двойные кавычки:

    expendo2 "Queue: MQQ AND Tag: ideas"

Запрос может и сам содержать в себе двойные кавычки, тогда их необходимо "экранировать" символом обратной черты:

    expendo2 "Project: \"My lovely project\""

> Expendo2 сохраняет запрос в файле `expendo2.ini` и может использовать его при следующем запуске,
> если запрос в параметрах не указан.

При запуске Expendo2 соединяется с Yandex Tracker и выполняет предварительную обработку данных согласно запросу.

Время предварительной обработки зависит от количества отобранных тикетов, качества связи и скорости работы сервера,
и обычно составляет 2-10 тикетов в секунду.

Вся дальнейшая обработка данных в Expendo2 выполняется с минимальными задержками.

> При предварительной обработке Expendo2 запоминает существенную часть полученной от сервера информации, что позволяет ускорить её обработку, но при этом:
> 
> Изменения, произошедшие в БД сервера после запуска Expendo2, не будут учтены в анализе.
> 
> Дл некоторых операций Expendo2 может обращаться к серверу, так что связь должна поддерживаться.

После предварительной обработки Expendo2 рассчитывает и выводит на экран общую статическую и справочную информацию,
и предоставляет командную строку для ввода команд.

## Общие команды

> Общие команды не имеют параметров, не могут быть вместе с другими командами, исполняются сразу.

### help, h, ?
Выводит краткую справку по командам.
### info или пустая команда
Выводит общую статистическую и справочную информацию (как при запуске).
### clear
Очищает выбранные категории и исключения (см. ниже).
### quit, exit, q
Завершает работу Expendo2.

***

## Параметры

> Задаваемые значения параметров сохраняются в программе и в файле `expendo2.ini`.
>
> Все параметры могут быть заданы через соответствующие аргументы при запуске Expendo2.
>
> Одной командой можно изменить несколько параметров сразу.
>
> Вместе с командами анализа данных ??????????????

### mode

### length

### base

### period ... to

### trend

### factor

### velocity

***

## Команды анализа данных



# Предупреждение: Типичные ошибки

# Матаппарат

# Futures

- группировка категорий методами union, intersection, в т.ч. итеративно